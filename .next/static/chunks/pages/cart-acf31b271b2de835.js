(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{8834:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return n(7849)}])},8360:(e,t,n)=>{"use strict";n.d(t,{i:()=>d,A:()=>s});var o=n(4848),i=n(3540);let r="#0D3D29",d=(0,i.AH)(["border:0;padding:5px 15px;border-radius:5px;cursor:pointer;display:inline-flex;align-items:center;text-decoration:none;font-weight:500;svg{height:16px;margin-right:5px;}"," "," "," "," "," "," "," "," @media screen and (max-width:767px){font-size:12px;}@media screen and (min-width:768px) and (max-width:1024px){font-size:12px;}@media screen and (min-width:1025px){}"],e=>e.$block&&(0,i.AH)(["display:block;width:100%;"]),e=>e.$black&&!e.$outline&&(0,i.AH)(["background-color:#000;color:#fff;"]),e=>e.$black&&e.$outline&&(0,i.AH)(["background-color:transparent;color:#000;border:2px solid #000;"]),e=>e.$white&&!e.$outline&&(0,i.AH)(["background-color:#fff;color:#000;"]),e=>e.$white&&e.$outline&&(0,i.AH)(["background-color:transparent;color:#fff;border:2px solid #fff;"]),e=>e.$primary&&!e.$outline&&(0,i.AH)(["background-color:",";color:#fff;border:2px solid ",";"],r,r),e=>e.$primary&&e.$outline&&(0,i.AH)(["background-color:transparent;color:",";border:2px solid ",";"],r,r),e=>"l"===e.size&&(0,i.AH)(["font-size:1.2rem;padding:10px 20px;svg{height:20px;}"])),a=i.Ay.button.withConfig({componentId:"sc-163d335f-0"})(["",""],d);function s(e){let{children:t,$primary:n,...i}=e;return(0,o.jsx)(a,{$primary:n,...i,children:t})}},9093:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(4848);let i=n(3540).Ay.div.withConfig({componentId:"sc-4f4af35b-0"})(["max-width:100%;margin:0 auto;padding:0 20px;height:100%;"]);function r(e){let{children:t}=e;return(0,o.jsx)(i,{children:t})}},5618:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var o=n(4848),i=n(1106),r=n.n(i),d=n(3540),a=n(9093),s=n(6540),c=n(9383);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"size-6";return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e,children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}let p=d.Ay.header.withConfig({componentId:"sc-45ca060a-0"})(["background-color:#222;width:100%;"]),h=(0,d.Ay)(r()).withConfig({componentId:"sc-45ca060a-1"})(["color:#fff;text-decoration:none;position:relative;z-index:3;"]),x=d.Ay.div.withConfig({componentId:"sc-45ca060a-2"})(["display:flex;justify-content:space-between;padding:20px 0;"]),u=d.Ay.nav.withConfig({componentId:"sc-45ca060a-3"})([""," gap:15px;position:fixed;top:0;bottom:0;left:0;right:0;padding:70px 20px 20px;background-color:#222;@media screen and (min-width:768px){display:flex;position:static;padding:0;}"],e=>e.$mobileNavActive?"display: block;":"display: none;"),g=(0,d.Ay)(r()).withConfig({componentId:"sc-45ca060a-4"})(["color:#aaa;text-decoration:none;display:block;padding:10px 0;@media screen and (min-width:768px){padding:0;}"]),m=d.Ay.button.withConfig({componentId:"sc-45ca060a-5"})(["background-color:transparent;width:30px;height:30px;border:0;color:white;cursor:pointer;position:relative;z-index:3;@media screen and (min-width:768px){display:none;}"]);function f(){let{cartProducts:e}=(0,s.useContext)(c.M),[t,n]=(0,s.useState)(!1);return(0,o.jsx)(p,{children:(0,o.jsx)(a.A,{children:(0,o.jsxs)(x,{children:[(0,o.jsx)(h,{href:"/",children:"Ecommerce"}),(0,o.jsxs)(u,{$mobileNavActive:t,children:[(0,o.jsx)(g,{href:"/",children:"Home"}),(0,o.jsx)(g,{href:"/products",children:"All Products"}),(0,o.jsxs)(g,{href:"/cart",children:["Cart (",e.length,")"]})]}),(0,o.jsx)(m,{onClick:()=>n(e=>!e),children:(0,o.jsx)(l,{})})]})})})}},7849:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var o=n(4848),i=n(6540),r=n(1613),d=n(9093),a=n(5618),s=n(3540),c=n(8360),l=n(9383),p=n(4335);let h=s.Ay.table.withConfig({componentId:"sc-c99b5b1b-0"})(["width:100%;th{text-align:left;text-transform:uppercase;color:#ccc;font-weight:600;font-size:0.7rem;}td{border-top:1px solid rgba(0,0,0,0.1);}"]);function x(e){return(0,o.jsx)(h,{...e})}let u=s.Ay.input.withConfig({componentId:"sc-c216a445-0"})(["width:100%;padding:5px;margin-bottom:5px;border-radius:5px;border:1px solid #ccc;box-sizing:border-box;"]);function g(e){return(0,o.jsx)(u,{...e})}var m=n(6715);let f=s.Ay.div.withConfig({componentId:"sc-4bcbb387-0"})(["display:grid;grid-template-columns:1fr;gap:40px;margin-top:40px;margin-bottom:40px;@media screen and (min-width:768px){grid-template-columns:1.3fr 0.7fr;}"]),b=s.Ay.div.withConfig({componentId:"sc-4bcbb387-1"})(["background-color:#fff;border-radius:10px;padding:30px;"]),y=s.Ay.td.withConfig({componentId:"sc-4bcbb387-2"})(["padding:10px 0;"]),j=s.Ay.div.withConfig({componentId:"sc-4bcbb387-3"})(["width:100px;height:100px;padding:2px;border:1px solid rgba(0,0,0,0.1);display:flex;justify-content:center;align-items:center;border-radius:10px;img{max-width:80px;max-height:80px;}@media screen and (min-width:768px){padding:10px;}"]),w=s.Ay.span.withConfig({componentId:"sc-4bcbb387-4"})(["padding:0 15px;display:block;@media screen and (min-width:768px){display:inline-block;padding:0 10px;}"]),v=s.Ay.div.withConfig({componentId:"sc-4bcbb387-5"})(["display:flex;gap:5px;"]);function A(){let{cartProducts:e,addProduct:t,removeProduct:n,clearCart:s}=(0,i.useContext)(l.M),[h,u]=(0,i.useState)([]),[A,C]=(0,i.useState)(""),[k,_]=(0,i.useState)(""),[$,I]=(0,i.useState)(""),[N,S]=(0,i.useState)(""),[z,E]=(0,i.useState)(""),[P,H]=(0,i.useState)(""),[M,O]=(0,i.useState)(""),B=(0,m.useRouter)();(0,i.useEffect)(()=>{e.length>0?p.A.post("/api/cart",{ids:e}).then(e=>{u(e.data)}):u([])},[e]),(0,i.useEffect)(()=>{B.query.success&&s()},[B.query.success]);let D=0;for(let t of e){var T;D+=(null===(T=h.find(e=>e._id===t))||void 0===T?void 0:T.price)||0}let F=h.map(t=>{let n=e.filter(e=>e===t._id).length;return n>0?"".concat(t.title," (x").concat(n,") -₦").concat(t.price):null}).filter(Boolean).join(", "),L={public_key:"FLWPUBK_TEST-44c36f418c8e69a29b8166250aeab215-X",tx_ref:Date.now(),amount:D,currency:"NGN",payment_options:"card,mobilemoney,ussd",customer:{email:k,phone_number:P,name:F},customizations:{title:"My store",description:"Payment At AutoCartel for ".concat(F),logo:"https://st2.depositphotos.com/4403291/7418/v/450/depositphotos_74189661-stock-illustration-online-shop-log.jpg"}};console.log(F);let X=(0,r.Rz)(L),q=()=>{B.push("/successPage")};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.A,{}),(0,o.jsx)(d.A,{children:(0,o.jsxs)(f,{children:[(0,o.jsxs)(b,{children:[(0,o.jsx)("h2",{children:"Cart"}),!(null==e?void 0:e.length)&&(0,o.jsx)("div",{children:"Your cart is empty"}),(null==h?void 0:h.length)>0&&(0,o.jsxs)(x,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Product"}),(0,o.jsx)("th",{children:"Quantity"}),(0,o.jsx)("th",{children:"Price"})]})}),(0,o.jsxs)("tbody",{children:[h.map(i=>(0,o.jsxs)("tr",{children:[(0,o.jsxs)(y,{children:[(0,o.jsx)(j,{children:(0,o.jsx)("img",{src:i.images[0],alt:i.title})}),i.title]}),(0,o.jsxs)("td",{children:[(0,o.jsx)(c.A,{onClick:()=>{n(i._id)},children:"-"}),(0,o.jsx)(w,{children:e.filter(e=>e===i._id).length}),(0,o.jsx)(c.A,{onClick:()=>{t(i._id)},children:"+"})]}),(0,o.jsxs)("td",{children:["₦",e.filter(e=>e===i._id).length*i.price]})]},i._id)),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{}),(0,o.jsx)("td",{}),(0,o.jsxs)("td",{children:["₦",D]})]})]})]})]}),!!(null==e?void 0:e.length)&&(0,o.jsxs)(b,{children:[(0,o.jsx)("h2",{children:"Order information"}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault()},children:[(0,o.jsx)(g,{type:"text",placeholder:"Name",value:A,name:"name",onChange:e=>C(e.target.value)}),(0,o.jsx)(g,{type:"text",placeholder:"Email",value:k,name:"email",onChange:e=>_(e.target.value)}),(0,o.jsx)(g,{type:"text",placeholder:"Phone Number",value:P,name:"phoneNumber",onChange:e=>H(e.target.value)}),(0,o.jsxs)(v,{children:[(0,o.jsx)(g,{type:"text",placeholder:"City",value:$,name:"city",onChange:e=>I(e.target.value)}),(0,o.jsx)(g,{type:"text",placeholder:"Postal Code",value:N,name:"postalCode",onChange:e=>S(e.target.value)})]}),(0,o.jsx)(g,{type:"text",placeholder:"Street Address",value:z,name:"streetAddress",onChange:e=>E(e.target.value)}),(0,o.jsx)(g,{type:"text",placeholder:"Country",value:M,name:"country",onChange:e=>O(e.target.value)}),(0,o.jsx)(c.A,{$black:!0,$block:!0,type:"button",onClick:()=>{X({callback:e=>{console.log(e),"successful"===e.status&&((async()=>{try{let e={product_Items:F,name:A,email:k,city:$,phoneNumber:P,postalCode:N,streetAddress:z,country:M,paid:!0};console.log(e);let t=await p.A.post("/api/flutterCheckOut",e);t.data.success?console.log("Order created successfully:",t.data.order):console.error("Failed to create order:",t.data.message)}catch(e){console.error("Error creating order:",e)}console.log("response",e)})(),s(),q()),(0,r.closePaymentModal)()},onClose:()=>{}})},children:"Buy Now"})]})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[106,929,636,593,792],()=>t(8834)),_N_E=e.O()}]);